<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:SchoolAppMobile"
             x:Class="SchoolAppMobile.Views.AlertsPage"
             Title="Alerts">

    <ScrollView>
        <CollectionView x:Name="AlertsCollection" Margin="10">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame BorderColor="Gray" CornerRadius="10" Padding="10" Margin="5">
                        <VerticalStackLayout>
                            <Label Text="{Binding Title}" FontAttributes="Bold" FontSize="18"/>
                            <Label Text="{Binding Message}" FontSize="14"/>
                            <Label Text="{Binding CreatedAt, StringFormat='Sent: {0:dd/MM/yyyy HH:mm}'}" FontSize="12" TextColor="Gray"/>
                            <Label Text="{Binding IsResolved, StringFormat='Resolved: {0}'}" FontSize="12" TextColor="DarkGreen"/>

                            <!-- Admin Response, if available -->
                            <Label Text="Admin Response:" 
                                   FontAttributes="Bold" 
                                   IsVisible="{Binding AdminResponse, Converter={StaticResource NullToBoolConverter}}"/>
                            <Label Text="{Binding AdminResponse}" 
                                   IsVisible="{Binding AdminResponse, Converter={StaticResource NullToBoolConverter}}" 
                                   FontAttributes="Italic"/>
                        </VerticalStackLayout>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </ScrollView>

    <Button Text="Back to Home"
                Clicked="OnBackToHomeClicked"
                BackgroundColor="DarkSlateBlue"
                TextColor="White"
                Margin="0,20,0,0" />
</ContentPage>
